<!DOCTYPE html>
<html>
<head>
<!--[if ie]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><![endif]-->
<script   src="https://code.jquery.com/jquery-2.2.4.min.js"   integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="   crossorigin="anonymous"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>jQuery Bracket</title>
<meta name="description" content="jQuery plugin for visualizing and editing single and double elimination tournament brackets" />
<script type="text/javascript" src="/js/jquery-ui-1.8.16.custom.min.js"></script>

<script type="text/javascript" src="/js/shCore.js"></script>
<script type="text/javascript" src="/js/shBrushJScript.js"></script>
<script type="text/javascript" src="/js/shBrushXml.js"></script>
<script type="text/javascript" src="/js/Bacon-1ab32ffb.min.js"></script>
<script type="text/javascript" src="/js/lodash-2.2.1.min.js"></script>
<script type="text/javascript" src="/js/live.js"></script>
<script type="text/javascript" src="/js/handlebars.1.0.0.js"></script>
<!-- <script type="text/javascript" src="/js/jquery.bracket.min.js"></script> -->
<link rel="stylesheet" type="text/css" href="/css/shCoreDefault.css"/>
<link rel="stylesheet" type="text/css" href="/css/jquery-ui-1.8.16.custom.css" />
<link rel="stylesheet" type="text/css" href="/css/jquery.bracket-site.css" />
<link rel="stylesheet" type="text/css" href="/css/jquery.bracket.min.css" />

<!-- Bootstrap core CSS -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<link href="/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link rel="stylesheet" href="/css/master.css">
<link rel="stylesheet" href="/css/normalize.css">

<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->

<script type="text/javascript">
$(function() {
    var demos = ['save', 'minimal', 'resize', 'matches', 'customHandlers', 'autoComplete', 'doubleElimination', 'noSecondaryFinal', 'noConsolationRound', 'noGrandFinalComeback', 'reverseBracket', 'big', 'connectorStyles']
    $.each(demos, function(i, d){
      var demo = $('div#'+d)
      $('<div class="demo"></div>').appendTo(demo)
      var pre = $('<pre name="code" class="js"></pre>').appendTo(demo)
      var script = demo.find('script')
      demo.find("h3").append($('<a href="#' + d + '">¶</a>'))
    //pre.text(script.html())  소스코드 보이는것 비활성화 ㅎㅎㅎㅎ
    })
  })
</script>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-1488867-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</head>

<body>
  <% include ../partials/navbar %>
  <% include ../partials/header %>
  <!-- <div style="float: left; width: 45%;"> -->
  <div class="container" id="about">
    <div class="row">
        <div class="col-xs-12">
    <h2>박세훈 탁구클럽 7월 월례대회-<%= gamename %></h2>
    <% if(user.username == 'guest') {%>
    <h3>Admin view</h3>
    <form action="/tbrackets/<%= tntid %>" method="post">
      <input type="hidden" id="resetdata" name="tdata" value="">
      <input class="btn btn-danger active" type="submit" style="float: right" onclick="return confirm('모든데이터가 삭제됩니다 초기화를 하시겠습니까?')" value="초기화">
    </form>
    <form action="/tbrackets/test/autofill/<%= tntid %>" method="post">
      <input type="hidden" id="savedata2" name="tdata" value="">
      <input class="btn btn-success active" type="submit" style="float: right" onclick="return confirm('예선리그 결과를 바탕으로 대진표를 자동생성합니다')" value="자동생성">
    </form>
    <form action="/tbrackets/<%= tntid %>" method="post">
        <input type="hidden" id="savedata" name="tdata" value="">
        <input class="btn btn-info active" type="button" value="월례대회" onclick="window.location.href='/rt_gbrackets_v2/main/singleMatch'" />
        <input class="btn btn-warning active" type="submit" value="저장">
        <input class="btn btn-success active" type="button" value="업데이트보기" onclick="window.location.href='/tbrackets/<%= tntid %>'" />
    </form>
  <hr>
  <div id="save"></div>
    </div>
  </div>
</div>

    <% } %>
    <%  if(user.username == 'guest2') { %>
        <h3>guest view</h3>
        <form action="/tbrackets/<%= tntid %>" method="post">
            <input type="hidden" id="savedata" name="tdata" value="">
            <input class="btn btn-info active" type="button" value="월례대회" onclick="window.location.href='/rt_gbrackets_v2/main/singleMatch'" />
            <input class="btn btn-success active" type="button" value="업데이트보기" onclick="window.location.href='/tbrackets'" />
        </form>
      <hr>
      <div id="save"></div>
      </div>
    </div>
  </div>
  <% } %>
  <h4>&nbsp;&nbsp;&nbsp;점수 입력후 꼭 저장버튼을 눌러주세요!!!</h4>
  <h4>&nbsp;&nbsp;&nbsp;점수입력이 하나도 없는 상태애서 저장하면 에러납니다 이때는 뒤로가기 눌러 주세요!!</h4>
  <script type="text/javascript">
  //alert('도착 =' );
  var viewData = {
    teams: [
      [null, null],
      [null, null],
      [null, null],
      [null, null]
    ],
    results: [
        [
          [[null, null], [null, null], [null, null], [null, null]],
          [[null, null], [null, null]],
          [[null, null], [null, null]]
        ]
    ]
  }

  $('#resetdata').val(JSON.stringify(viewData, undefined, 2));
  rdata = <%- JSON.stringify(sdata) %>;
  var viewData = {
    teams: [
      ['가나다', null],
      [null, null],
      [null, null],
      [null, null]
    ],
    results: [
        [
          [[null, null], [null, null], [null, null], [null, null]],
          [[null, null], [null, null]],
          [[null, null], [null, null]]
        ]
    ]
  }
  // alert(' rdata=' + rdata.teams);
  // alert(' viewData=' + viewData.teams);
  function saveFn(data, userData) {
    var json = jQuery.toJSON(data);
    $('#savedata').val(JSON.stringify(data, undefined, 2));
    $('#savedata2').val(JSON.stringify(data, undefined, 2));
    $('#saveOutput').text(json);
    }

  $(function() {
      var container = $('div#save .demo')
      container.bracket({
        teamWidth: 100,
        scoreWidth: 30,
        matchMargin: 10,
        roundMargin: 50,
        init: rdata,
        save: saveFn,
        userData:  <%- JSON.stringify(sdata) %>
      })

      /* You can also inquiry the current data */
      var data = container.bracket('data')
      $('#dataOutput').text(jQuery.toJSON(data))
    })
  </script>
</div>


</script>
<script src="https://code.jquery.com/jquery.js"></script>
<script type="text/javascript" src="/js/jquery.bracket.min.js"></script> <!-- 반드시 헤드가 아닌 이쪽아래에 둘것 -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript" src="/js/jquery.json-2.2.min.js"></script>
</body>
</html>
